<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8"> <!-- selects charset -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <!--specifies how to process-->
  <title>Luna Bus</title>
  <link rel="shortcut icon" href="favicon2.ico">.
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <style>
  body {
    padding-top: 50px;
    padding-bottom: 20px;
  }
  </style>
  <link rel="stylesheet" href="css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="css/main.css">

  <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>
<body>
 <!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
<![endif]-->
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Luna Bus</a>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-12"><h1>Reunion Malibu Trip</h1></div>
  </div>
  <div class="row"> <!--Time and location-->
    <div class="col-md-12" id="locationandtime">
      <label>Location and time</label>
      <p>Pickup at 5482 Wilshire Blvd Los Angeles, CA 90036</p>
      <p>Pick up on October 7, 2014</p>
      <p>Leave at 6 PM, returning at 11 PM</p>
    </div>
    <form role="form"> <!--Everything fits in form -->
      </div>
      <div class="row">
        <div class="col-md-6"> 
          <div id="buscapacity" class="form-group">
            <label>Bus Capacity</label><br/>
            <label class="radio-inline">
              <input type="radio" name="buscapacity" id="inlineCheckbox1" value="option1"> 12 Person
            </label>
            <label class="radio-inline">
              <input type="radio" name="buscapacity" id="inlineCheckbox2" value="option2"> 24 Person
            </label>
            <label class="radio-inline">
              <input type="radio" name="buscapacity" id="inlineCheckbox3" value="option3"> 45 Person
            </label>
          </div>
          <label>Total bus price</label>
          <h2 class="totalprice">This should update</h2>
        </div>
      </div>
      <div class="row">
        <div id="minimumtotilt" class ="form-group">
          <label for="minpeople">Minimum group size to tilt</label>
          <input type ="number" id="minpeople" placeholder="Enter minimum number of people">
        </div>
        <div id="fixedorsplit" class = "form-group">
          <label for="fixedorsplit">How should we collect funds to pay for the bus?</label><br>
          <label class="radio-inline">
            <input type="radio" name="fixedorsplit" id="inlineCheckbox1" value="option1"> Collect a fixed per-person price, keeping any extra funds
          </label>
          <br>
          <label class="radio-inline">
            <input type="radio" name="fixedorsplit" id="inlineCheckbox2" value="option2"> Everyone pays less when more people join
          </label>
        </div>
        <div id="handleextra" class = "form-group">
          <label>How should we collect additional funds?</label><br/>
          <label class="radio-inline">
            <input type="radio" name="handleextra" id="inlineCheckbox1" value="option1"> Minimum total amount
            <input type ="text" name=minimumextra><br>
            <br>
          </label>
          <br>
          <label class="radio-inline">
            <input type="radio" name="handleextra" id="inlineCheckbox2" value="option2"> Per person amount
            <input type ="text" name="perpersonextra">
          </label>
        </div>
        <div id="tablewrapper" class="col-md-6"> 
          <table class="table table-striped">  
          <thead>  
            <tr>  
              <th></th>  
              <th id="TC1R0">Amount to Split</th>  
              <th id="TC2R0">At 25 ppl</th>  
              <th id="TC3R0">At 40 ppl</th>  
              <th id="TC4R0">At 45 ppl</th>  
            </tr>  
          </thead>  
          <tbody>  
            <tr>  
              <td id="TC0R1">Bus Cost</td>  
              <td id="TC1R1">1,349.00 </td>  
              <td id="TC2R1">53.96</td>  
              <td id="TC3R1">33.73</td>  
              <td id="TC4R1">29.98</td>  
            </tr>  
            <tr>  
              <td id="TC0R2">Extra</td>  
              <td id="TC1R2">200.00</td>  
              <td id="TC2R2">8.00</td>
              <td id="TC3R2">5.00</td>    
              <td id="TC4R2">4.40</td>    
            </tr>  
            <tr>  
              <td id="TC0R3">Total</td>  
              <td id="TC1R3">1,549.00</td>  
              <td id="TC2R3">61.96</td>  
              <td id="TC3R3">38.73</td>  
              <td id="TC4R3">34.42</td>  
            </tr>  
          </tbody>  
         </table>  
        </div> 
      </div><!--ends row-->







      <div id="triptitledescription" class="form-group">
        <label for="triptitle">Trip Name</label>
        <input type="text" class="form-control" id=triptitle placeholder="Enter trip title">
      </div>
      <div class="form-group">
        <label for="tripdescription">Trip Description</label>
        <textarea class="form-control" rows="6" id="tripdescription" placeholder="Describe your trip here."></textarea>
      </div>
      <div class="form-group">
        <label for="tripimageupload">Optional Image or video</label>
        <input type="text" class="form-control" id="tripimageupload"> 
        <input type="file" id="tripimageupload">
      </div>
      <div class="form-group">
        <label for="customername">Your Name</label>
        <input type="text" class = "form-control" id="customername" placeholder="Enter your name">
      </div>
      <div class="form-group">
        <label for="customeremail">Your email</label>
        <input type="email" class="form-control" id="customeremail" placeholder="Enter your email">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>      
</form>
</div>
</div>
<hr>

<footer>
  <p>&copy; Lunabus 2013</p>
</footer>


</body>
</div>



<!-- /container -->       
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.min.js"><\/script>')</script>

<script src="js/vendor/bootstrap.min.js"></script>

<script src="js/main.js"></script>

<script>
  var busPrice12 = 1000;
  var busPrice24 = 2000;
  var busPrice45 = 3000;
  var busPrice = null;
  var maxPPL = null;
  var minPPLTilt = null;
  var somePPL = null;
  var perPersonFixed = 200;
  var perPersonAmount = true;
  var minExtraAmt = 200;
  var totalToCharge = null;

  $( document ).ready(function() {
    alert("Dom is ready!");
    $('#buscapacity').click(function() {
     if($('#inlineCheckbox1').is(':checked')) { 
        busPrice = busPrice12;
        maxPPL = 12;
      }
     if($('#inlineCheckbox2').is(':checked')) { 
        busPrice = busPrice24; 
        maxPPL = 24;
      }
     if($('#inlineCheckbox3').is(':checked')) { 
        busPrice = busPrice45; 
        maxPPL = 45;
      }
     $(".totalprice").html(busPrice);
     if(maxPPL != null) {
      minPPLTilt = (maxPPL / 2).toFixed(0);
      somePPL = (maxPPL + minPPLTilt).toFixed(0);
      alert("maxPPL set to " + maxPPL + ", minPPLTilt set to " + minPPLTilt + ", somePPL set to " + somePPL);
     } 

     updateTable();
   });

    $(minimumtotilt).change(function() {
      minPPLTilt = minimumtotilt.val();
      somePPL = (maxPPL + minPPLTilt).toFixed(-1) / 2;
      updateTable();
    });

    function RNWC(yourNumber) {
      //Seperates the components of the number
      var n= yourNumber.toString().split(".");
      //Comma-fies the first part
      n[0] = n[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      //Combines the two sections
      return n.join(".");
    }

  //lets create a function for whenever bus capacity or the two radio buttons change
    function updateTable() {
      totalToCharge = busPrice + minExtraAmt;
      $(".totalprice").html(busPrice);
      $(TC1R1).html(RNWC(busPrice));
      $(TC1R2).html(RNWC(minExtraAmt));
      $(TC1R3).html(RNWC(totalToCharge));
    //This section divided by minimum
      $(TC2R0).html(RNWC("At " + minPPLTilt + " PPL"));
      $(TC2R1).html(RNWC(busPrice/minPPLTilt));
      $(TC2R2).html(RNWC(minExtraAmt/minPPLTilt));
      $(TC2R3).html(RNWC(totalToCharge/minPPLTilt));
    //This section divided by midpoint, rounded up
      $(TC3R0).html("At " + somePPL + " PPL");
      $(TC3R1).html(RNWC(busPrice/minPPLTilt));
      $(TC3R2).html(RNWC(minExtraAmt/minPPLTilt));
      $(TC3R3).html(RNWC(totalToCharge/minPPLTilt));  
    //This section divided by maximum, rounded up
      $(TC4R0).html("At " + maxPPL + " PPL");
      $(TC4R1).html(RNWC(busPrice/maxPPL));
      $(TC4R2).html(RNWC(minExtraAmt/maxPPL));
      $(TC4R3).html(RNWC(totalToCharge/maxPPL));  
    };


  });

  //    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  //  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  //    g.src='//www.google-analytics.com/ga.js';
  //    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
</body>
</html>
